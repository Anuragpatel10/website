/* interact.js v1.0.7 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(e){"use strict";function t(){}function n(e){N=e.pageX,$=e.pageY,K=e.clientX,V=e.clientY,Z=e}function r(e,t){var n,r,i;return e=e||"page",t.touches?(n=t.touches.length?t.touches[0]:t.changedTouches[0],r=n[e+"X"],i=n[e+"Y"]):(r=t[e+"X"],i=t[e+"Y"]),{x:r,y:i}}function i(t){var n;if(Ct)n=r("screen",t),n.x+=e.scrollX,n.y+=e.scrollY;else{if(/gesture|inertia/i.test(t.type))return n=r("client",t),n.x+=D.documentElement.scrollLeft,n.y+=D.documentElement.scrollTop,n;n=r("page",t)}return n}function o(e){return r(Ct?"screen":"client",e)}function s(){return{x:e.scrollX||D.documentElement.scrollLeft,y:e.scrollY||D.documentElement.scrollTop}}function a(e){var t,n=e.touches,r=0,i=0,o=0,s=0;for(t=0;t<n.length;t++)r+=n[t].pageX/n.length,i+=n[t].pageY/n.length,o+=n[t].clientX/n.length,s+=n[t].clientY/n.length;return{pageX:r,pageY:i,clientX:o,clientY:s}}function l(e){if(e.touches.length){var t,n=e.touches,r=e.touches[0].pageX,i=e.touches[0].pageY,o=r,s=i;for(t=1;t<n.length;t++)r=r>e.touches[t].pageX?r:e.touches[t].pageX,i=r>e.touches[t].pageX?i:e.touches[t].pageY;return{left:r,top:i,width:o-r,height:s-i}}}function c(e){var t=(ct&&ct.options||dt).deltaSource,n=t+"X",r=t+"Y",i=e.touches[0][n],o=e.touches[0][r];return"touchend"===e.type&&1===e.touches.length?(i-=e.changedTouches[0][n],o-=e.changedTouches[0][r]):(i-=e.touches[1][n],o-=e.touches[1][r]),Math.sqrt(i*i+o*o)}function u(e,t){var n=(ct&&ct.options||dt).deltaSource,r=n+"X",i=n+"Y",o=e.touches[0][r],s=e.touches[0][i];"touchend"===e.type&&1===e.touches.length?(o-=e.changedTouches[0][r],s-=e.changedTouches[0][i]):(o-=e.touches[1][r],s-=e.touches[1][i]);var a=180*Math.atan(s/o)/Math.PI;if("number"==typeof t){var l=a-t,c=l%360;c>315?a-=360+a/360|0:c>135?a-=180+a/360|0:-315>c?a+=360+a/360|0:-135>c&&(a+=180+a/360|0)}return a}function h(e){e=e||ct;var t=e?e.options.origin:dt.origin;return t instanceof Element?(t=M(t).getRect(),t.x=t.left,t.y=t.top):"function"==typeof t&&(t=t(e&&e._element)),t}function d(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function p(e){if(e.length){var t,n,r,i,o,s=e[0],a=[],l=[];for(i=1;i<e.length;i++){if(t=e[i],!a.length)for(n=s;n.parentNode!==D;)a.unshift(n),n=n.parentNode;if(s instanceof q&&t instanceof P&&!(t instanceof j)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==D;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(r=c[0].lastChild;r;){if(r===c[1]){s=t,a=[];break}if(r===c[2])break;r=r.previousSibling}}return{element:s,index:e.indexOf(s)}}}function g(e){if(nt.length||ot.length){var t,n,r=[],i=[],o=[],s=[];for(t=0;t<nt.length;t++)nt[t].dropCheck(e)&&(r.push(nt[t]),i.push(nt[t]._element));if(n=p(i),ut=n?r[n.index]:null,ot.length){var a=ct._element;for(t=0;t<ot.length;t++)for(var l=ot[t],c=D.querySelectorAll(l.selector),u=0,h=c.length;h>u;u++)l._element=c[u],l.rect=l.getRect(),l._element!==a&&-1===i.indexOf(l._element)&&s.indexOf(-1===l._element)&&l.dropCheck(e)&&(o.push(l),s.push(l._element));s.length&&(ut&&(o.push(ut),s.push(ut._element)),n=p(s),n&&(ut=o[n.index],ut.selector&&(ut._element=s[n.index])))}return ut}}function f(e,t,n,r,s){var d,p,g=(ct&&ct.options||dt).deltaSource,f=ct?ct.options:dt,y=h(ct);if(r=r||ct._element,"gesture"===t){var m=a(e);p={x:m.pageX-y.x,y:m.pageY-y.y},d={x:m.clientX-y.x,y:m.clientY-y.y}}else if(p=i(e),d=o(e),p.x-=y.x,p.y-=y.y,d.x-=y.x,d.y-=y.y,ct.options.snapEnabled&&-1!==ct.options.snap.actions.indexOf(t)){var v=f.snap;this.snap={mode:v.mode,anchors:pt.anchors,range:pt.range,locked:pt.locked,x:pt.x,y:pt.y,realX:pt.realX,realY:pt.realY,dx:pt.dx,dy:pt.dy},pt.locked&&("path"===v.mode?(pt.xInRange&&(p.x+=pt.dx,d.x+=pt.dx),pt.yInRange&&(p.y+=pt.dy,d.y+=pt.dy)):(p.x+=pt.dx,p.y+=pt.dy,d.x+=pt.dx,d.y+=pt.dy))}if(ct.options.restrictions[t]){var x,b=ct.options.restrictions[t],E=p.x,S=p.y;b instanceof Element?x=M(b).getRect():("function"==typeof b&&(b=b(p.x,p.y,ct._element)),x=b,"x"in b&&"y"in b&&(x={left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})),p.x=Math.max(Math.min(x.right,p.x),x.left),p.y=Math.max(Math.min(x.bottom,p.y),x.top);var O=p.x-E,_=p.y-S;d.x+=O,d.y+=_}if(this.x0=U,this.y0=H,this.clientX0=F,this.clientY0=W,this.pageX=p.x,this.pageY=p.y,this.clientX=d.x,this.clientY=d.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=r,this.t0=J,this.type=t+(n||""),s&&(this.relatedTarget=s),"end"===n||"drop"===t?"client"===g?(this.dx=d.x-U,this.dy=d.y-H):(this.dx=p.x-U,this.dy=p.y-H):"client"===g?(this.dx=d.x-K,this.dy=d.y-V):(this.dx=p.x-N,this.dy=p.y-$),"resize"===t?f.squareResize||e.shiftKey?("y"===_t?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=_t,"x"===_t?this.dy=0:"y"===_t&&(this.dx=0)):"gesture"===t&&(this.touches=e.touches,this.distance=c(e),this.box=l(e),"start"===n?(this.scale=1,this.ds=0,this.angle=u(e),this.da=0):(this.scale=this.distance/et.startDistance,this.angle=u(e,et.prevAngle),"end"===n?(this.da=this.angle-et.startAngle,this.ds=this.scale-1):(this.da=this.angle-et.prevAngle,this.ds=this.scale-et.prevScale))),"start"===n)this.timeStamp=J,this.dt=0,this.duration=0,this.speed=0;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-Z.timeStamp,this.duration=this.timeStamp-J;var z=("end"===n?this.duration:this.dt)/1e3;this.speed=Math.sqrt(this.dx*this.dx+this.dy*this.dy)/z}}function y(e,t){if("string"!=typeof e)return null;t=t||ct;var n=-1!==e.indexOf("resize")?"resize":e,r=(t||ct).options;return("resize"===n&&r.resizeable||"drag"===e&&r.draggable||"gesture"===e&&r.gestureable)&&wt[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function m(e){var t;if(!(Et||Ot||bt)){if(st.length&&/mousedown|pointerdown/i.test(e.type))t=O(e,st);else for(var n,r,i=e.target instanceof L?e.target.correspondingUseElement:e.target;i!==D&&!t;){st=[];for(n in it)r=Element.prototype[It]===A?D.querySelectorAll(n):void 0,i[It](n,r)&&(it[n]._element=i,st.push(it[n]));t=O(e,st),i=i.parentNode}return t?(mt=!0,v(e,t)):void 0}}function v(e,t){(e.touches&&e.touches.length<2&&!ct||!mt)&&(ct=tt.get(e.currentTarget));var n=ct&&ct.options;if(ct&&!(Et||Ot||bt)){var r,s,l,c=y(t||ct.getAction(e)),u=h(ct);if(B&&e instanceof B&&(ct.selector?lt.addPointer(e.pointerId):(ct._gesture.target||(ct._gesture.target=ct._element),ct._gesture.addPointer(e.pointerId))),e.touches?(r=a(e),s={x:r.pageX,y:r.pageY},l={x:r.clientX,y:r.clientY}):(s=i(e),l=o(e)),!c)return e;mt=!0,vt=!1,n.styleCursor&&(D.documentElement.style.cursor=zt[c].cursor),_t="resizexy"===c?"xy":"resizex"===c?"x":"resizey"===c?"y":"",Rt=c,U=s.x-u.x,H=s.y-u.y,F=l.x-u.x,W=l.y-u.y,pt.x=null,pt.y=null,e.preventDefault(),J=(new Date).getTime(),Q=e}}function x(e){if(mt&&(U===N&&H===$&&(vt=!0),Rt&&ct))if(ct.options.snapEnabled&&-1!==ct.options.snap.actions.indexOf(Rt)){var t,n,r,s,a,l,c,u,d,p=ct.options.snap,g=i(e),f=h(ct);if(pt.realX=g.x,pt.realY=g.y,g.x-=f.x,g.y-=f.y,p.range<0&&(p.range=1/0),"anchor"===p.mode&&p.anchors.length){for(t={anchor:null,distance:0,range:0,distX:0,distY:0},u=0,d=p.anchors.length;d>u;u++){var y=p.anchors[u];n="number"==typeof y.range?y.range:p.range,a=y.x-g.x,l=y.y-g.y,c=Math.sqrt(a*a+l*l),r=n>c,1/0===n&&t.inRange&&1/0!==t.range&&(r=!1),(!t.anchor||(r?t.inRange&&1/0!==n?c/n<t.distance/t.range:c<t.distance:!t.inRange&&c<t.distance))&&(1/0===n&&(r=!0),t.anchor=y,t.distance=c,t.range=n,t.inRange=r,t.distX=a,t.distY=l,pt.range=n)}r=t.inRange,s=t.anchor.x!==pt.x||t.anchor.y!==pt.y,pt.x=t.anchor.x,pt.y=t.anchor.y,pt.dx=t.distX,pt.dy=t.distY,ct.options.snap.anchors.closest=pt.anchors.closest=t.anchor}else if("grid"===p.mode){var m=Math.round((g.x-p.gridOffset.x)/p.grid.x),v=Math.round((g.y-p.gridOffset.y)/p.grid.y),x=m*p.grid.x+p.gridOffset.x,b=v*p.grid.y+p.gridOffset.y;a=x-g.x,l=b-g.y,c=Math.sqrt(a*a+l*l),r=c<p.range,s=x!==pt.x||b!==pt.y,pt.x=x,pt.y=b,pt.dx=a,pt.dy=l,pt.range=p.range}if("path"===p.mode&&p.paths.length){for(t={path:{},distX:0,distY:0,range:0},u=0,d=p.paths.length;d>u;u++){var E,S,O=p.paths[u],_=!1,z=!1,w=O;"function"==typeof O&&(w=O(g.x,g.y)),"number"==typeof w.x?(E=w.x,_=!0):E=g.x,"number"==typeof w.y?(S=w.y,z=!0):S=g.y,n="number"==typeof w.range?w.range:p.range,a=E-g.x,l=S-g.y;var R=Math.abs(a)<n&&_,X=Math.abs(l)<n&&z;1/0===n&&t.xInRange&&1/0!==t.range&&(R=!1),"x"in t.path&&!(R?t.xInRange&&1/0!==n?c/n<t.distX/t.range:Math.abs(a)<Math.abs(t.distX):!t.xInRange&&Math.abs(a)<Math.abs(t.distX))||(1/0===n&&(R=!0),t.path.x=E,t.distX=a,t.xInRange=R,t.range=n,pt.range=n),1/0===n&&t.yInRange&&1/0!==t.range&&(X=!1),"y"in t.path&&!(X?t.yInRange&&1/0!==n?c/n<t.distY/t.range:Math.abs(l)<Math.abs(t.distY):!t.yInRange&&Math.abs(l)<Math.abs(t.distY))||(1/0===n&&(X=!0),t.path.y=S,t.distY=l,t.yInRange=X,t.range=n,pt.range=n)}r=t.xInRange||t.yInRange,s=!t.xInRange||!t.yInRange||pt.xInRange&&pt.yInRange?!t.xInRange||!t.yInRange||t.path.x!==pt.x||t.path.y!==pt.y:!0,pt.x=t.path.x,pt.y=t.path.y,pt.dx=t.distX,pt.dy=t.distY,pt.xInRange=t.xInRange,pt.yInRange=t.yInRange,ct.options.snap.paths.closest=pt.paths.closest=t.path}if(!s&&pt.locked||!r)(s||!r)&&(pt.locked=!1,zt[Rt].moveListener(e));else{if(pt.locked=!0,!(Et||Ot||bt)){var T=i(e),Y=o(e);U=T.x-f.x+pt.dx,H=T.y-f.y+pt.dy,F=Y.x-f.x+pt.dx,W=Y.y-f.y+pt.dy}zt[Rt].moveListener(e)}}else zt[Rt].moveListener(e);(Et||Ot)&&gt.edgeMove(e)}function b(e){e.preventDefault();var t,r,i,o,s;if(!Et){if(n(Q),t=new f(Q,"drag","start"),Et=!0,ct.fire(t),!St){d(nt);for(var a=0;a<ot.length;a++)ot[a]._elements=D.querySelectorAll(ot[a].selector)}n(t)}var l=ct._element,c=ht&&ht._element;t=new f(e,"drag","move"),o=g(e,ct);var u=o?o._element:null;ct._element=l,o!==ht&&(ht&&(i=new f(e,"drag","leave",c,l),t.dragLeave=ht._element,s=ht,ht=null),o&&(r=new f(e,"drag","enter",u,l),t.dragEnter=o._element,ht=o)),ct.fire(t),i&&s.fire(i),r&&o.fire(r),n(t)}function E(e){e.preventDefault();var t;Ot||(n(Q),t=new f(Q,"resize","start"),ct.fire(t),ct.fire(t),Ot=!0,n(t)),t=new f(e,"resize","move"),ct.fire(t),n(t)}function S(e){if(e.touches&&!(e.touches.length<2)){e.preventDefault();var t;bt||(n(Q),t=new f(Q,"gesture","start"),t.ds=0,et.startDistance=et.prevDistance=t.distance,et.startAngle=et.prevAngle=t.angle,et.scale=1,bt=!0,ct.fire(t),n(t)),t=new f(e,"gesture","move"),t.ds=t.scale-et.scale,ct.fire(t),n(t),et.prevAngle=t.angle,et.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(et.scale=t.scale)}}function O(e,t){for(var n=0,r=t.length;r>n;n++){var i=t[n],o=y(i.getAction(e,i),i);if(o)return ct=i,o}}function _(e){if(!(mt||Et||Ot||bt)){var t=[],n=ct&&ct._element,r=e.target instanceof L?e.target.correspondingUseElement:e.target;for(var i in it)it.hasOwnProperty(i)&&it[i]&&r[It](i)&&(it[i]._element=r,t.push(it[i]));var o=tt.get(r),s=o&&y(o.getAction(e),o);if(s)ct=o,st=[];else if(O(e,t))st=t,w(e,st),jt.addToElement(r,"mousemove",w);else if(ct){var a=n.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(a,r)){for(var l=0;l<st.length;l++)st[l]._element=n;w(e,st),jt.addToElement(ct._element,"mousemove",w)}else ct=null,st=[]}}}function z(e){var t=e.target instanceof L?e.target.correspondingUseElement:e.target;tt.get(t)||jt.removeFromElement(t,w),ct&&ct.options.styleCursor&&!(Et||Ot||bt)&&(D.documentElement.style.cursor="")}function w(e,t){if(mt||Et||Ot||bt)e.preventDefault();else{var n;t?n=O(e,t):ct&&(n=y(ct.getAction(e))),ct&&ct.options.styleCursor&&(D.documentElement.style.cursor=n?zt[n].cursor:"")}}function R(e){var t;if(!(e.touches&&e.touches.length>=2)){if(Et){t=new f(e,"drag","end");var n,r=ct._element,i=g(e,ct),o=i?i._element:null;if(ct._element=r,i)n=new f(e,"drop",null,o,r),t.dropzone=o;else if(ht){var s=new f(e,"drag","leave",o,r);ht.fire(s,r),t.dragLeave=ht._element}ct.fire(t),n&&ut.fire(n)}else if(Ot)t=new f(e,"resize","end"),ct.fire(t);else if(bt)t=new f(e,"gesture","end"),ct.fire(t);else if(/mouseup|touchend|pointerup/i.test(e.type)&&ct&&mt&&!vt){var a={};for(var l in e)a[l]=e[l];a.currentTarget=ct._element,a.type="tap",ct.fire(a)}M.stop()}}function X(e,t){var n,r,i={},o=at[e.type],s=e.target;t=t?!0:!1;for(var a in e)i[a]=e[a];for(i.preventDefault=function(){e.preventDefault()};s!==D;){for(n in o)if(s[It](n)){var l=o[n];for(i.currentTarget=s,r=0;r<l.length;r++)if(l[r][1]===t)try{l[r][0](i)}catch(c){k.error('Error thrown from delegated listener: "'+n+'" '+e.type+" "+(l[r][0].name?l[r][0].name:"")),k.log(c)}}s=s.parentNode}}function T(e){return X.call(this,e,!0)}function Y(){ct&&!ct.selector&&(ct=null),ut=ht=null}function M(e){return tt.get(e)||new I(e)}function C(e){for(var t in dt)e.hasOwnProperty(t)&&typeof e[t]==typeof dt[t]&&(this[t]=e[t])}function I(e,t){this._element=e,this._iEvents=this._iEvents||{},"string"==typeof e?(D.querySelector(e),it[e]=this,this.selector=e):(e instanceof Element&&(B?(jt.add(this,"pointerdown",v),jt.add(this,"pointermove",w),this._gesture=new G,this._gesture.target=e):(jt.add(this,"mousedown",v),jt.add(this,"mousemove",w),jt.add(this,"touchstart",v),jt.add(this,"touchmove",w))),rt.push(this)),tt.push(this),this.set(t)}var A,D=e.document,k=e.console,P=e.SVGElement||t,j=e.SVGSVGElement||t,L=e.SVGElementInstance||t,q=e.HTMLElement||e.Element,B=e.PointerEvent||e.MSPointerEvent,G=(e.GestureEvent||e.MSGestureEvent,e.Gesture||e.MSGesture),N=0,$=0,K=0,V=0,U=0,H=0,F=0,W=0,J=0,Q=null,Z=null,et={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},tt=[],nt=[],rt=[],it={},ot=[],st=[],at={},lt=null,ct=null,ut=null,ht=null,dt={draggable:!1,dropzone:!1,resizeable:!1,squareResize:!1,gestureable:!1,styleCursor:!0,snap:{mode:"grid",actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/},snapEnabled:!1,restrictions:{},autoScroll:{container:e,margin:60,interval:20,distance:10,elementTypes:/^container$/,numberTypes:/^range$|^interval$|^distance$/},autoScrollEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},pt={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},gt={margin:60,interval:20,i:null,distance:10,x:0,y:0,scroll:function(){var t=ct.options.autoScroll.container;t===e?e.scrollBy(gt.x,gt.y):t&&(t.scrollLeft+=gt.x,t.scrollTop+=gt.y)},edgeMove:function(t){if(ct&&ct.options.autoScrollEnabled&&(Et||Ot)){var n,r,i,o,s=ct.options.autoScroll;if(s.container===e)o=t.clientX<gt.margin,n=t.clientY<gt.margin,r=t.clientX>e.innerWidth-gt.margin,i=t.clientY>e.innerHeight-gt.margin;else{var a=M(s.container).getRect();o=t.clientX<a.left+gt.margin,n=t.clientY<a.top+gt.margin,r=t.clientX>a.right-gt.margin,i=t.clientY>a.bottom-gt.margin}gt.x=gt.distance*(r?1:o?-1:0),gt.y=gt.distance*(i?1:n?-1:0),gt.isScrolling||(gt.margin=s.margin,gt.distance=s.distance,gt.interval=s.interval,gt.start())}},isScrolling:!1,start:function(){gt.isScrolling=!0,e.clearInterval(gt.i),gt.i=e.setInterval(gt.scroll,gt.interval)},stop:function(){e.clearInterval(gt.i),gt.isScrolling=!1}},ft="createTouch"in D,yt=ft?20:10,mt=!1,vt=!1,xt=!1,bt=!1,Et=!1,St=!1,Ot=!1,_t="xy",zt={drag:{cursor:"move",moveListener:b},resizex:{cursor:"e-resize",moveListener:E},resizey:{cursor:"s-resize",moveListener:E},resizexy:{cursor:"se-resize",moveListener:E},gesture:{cursor:"",moveListener:S}},wt={drag:!0,resize:!0,gesture:!0},Rt=null,Xt="onmousewheel"in D?"mousewheel":"wheel",Tt=["resizestart","resizemove","resizeend","dragstart","dragmove","dragend","dragenter","dragleave","drop","gesturestart","gesturemove","gestureend","tap"],Yt={},Mt={directBind:0,onevent:1,globalBind:2},Ct="Opera"==navigator.appName&&ft&&navigator.userAgent.match("Presto"),It="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",At={_element:e,events:{}},Dt={_element:D,events:{}},kt={_element:e.parent,events:{}},Pt={_element:null,events:{}},jt=function(){function t(e,t,n,r){var s=l.indexOf(e),h=c[s];if(h||(h={events:{},typeCount:0},s=l.push(e)-1,c.push(h),u.push(i?{supplied:[],wrapped:[],useCount:[]}:null)),h.events[t]||(h.events[t]=[],h.typeCount++),-1===h.events[t].indexOf(n)){var d;if(i){var p=u[s],g=p.supplied.indexOf(n),f=p.wrapped[g]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+D.documentElement.scrollLeft,t.pageY=t.clientY+D.documentElement.scrollTop),n(t))};d=e[o](a+t,f,Boolean(r)),-1===g?(p.supplied.push(n),p.wrapped.push(f),p.useCount.push(1)):p.useCount[g]++}else d=e[o](t,n,r||!1);return h.events[t].push(n),d}}function n(e,t,r,o){var h,d,p,g=l.indexOf(e),f=c[g],y=r;if(f&&f.events)if(i&&(d=u[g],p=d.supplied.indexOf(r),y=d.wrapped[p]),"all"!==t){if(f.events[t]){var m=f.events[t].length;if("all"===r)for(h=0;m>h;h++)n(e,t,f.events[t][h],Boolean(o));else for(h=0;m>h;h++)if(f.events[t][h]===r){e[s](a+t,y,o||!1),f.events[t].splice(h,1),i&&d&&(d.useCount[p]--,0===d.useCount[p]&&(d.supplied.splice(p,1),d.wrapped.splice(p,1),d.useCount.splice(p,1)));break}f.events[t]&&0===f.events[t].length&&(f.events[t]=null,f.typeCount--)}f.typeCount||(c.splice(g),l.splice(g),u.splice(g))}else for(t in f.events)f.events.hasOwnProperty(t)&&n(e,t,"all")}var r=e.Event,i="attachEvent"in e&&!("addEventListener"in e),o=i?"attachEvent":"addEventListener",s=i?"detachEvent":"removeEventListener",a=i?"on":"",l=[],c=[],u=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in r.prototype||(r.prototype.stopPropagation=function(){this.cancelBubble=!0},r.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in r.prototype||(r.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in r.prototype||(r.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(e,n,r,i){t(e._element,n,r,i)},remove:function(e,t,r,i){n(e._element,t,r,i)},addToElement:t,removeFromElement:n,useAttachEvent:i}}();f.prototype={preventDefault:t,stopImmediatePropagation:function(){xt=!0},stopPropagation:t},tt.indexOfElement=nt.indexOfElement=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector===e||!n.selector&&n._element===e)return t}return-1},tt.get=function(e){return"string"==typeof e?it[e]:this[this.indexOfElement(e)]},nt.get=function(e){return this[this.indexOfElement(e)]},C.prototype=dt,I.prototype={setOnEvents:function(e,t){if("drop"===e){var n=t.ondrop||t.onDrop||t.drop,r=t.ondragenter||t.onDropEnter||t.dragenter,i=t.ondragleave||t.onDropLeave||t.dragleave;"function"==typeof n&&(this.ondrop=n),"function"==typeof r&&(this.ondragenter=r),"function"==typeof i&&(this.ondragleave=i)}else{var o=t.onstart||t.onStart||t.start,s=t.onmove||t.onMove||t.move,a=t.onend||t.onEnd||t.end,e="on"+e;"function"==typeof o&&(this[e+"start"]=o),"function"==typeof s&&(this[e+"move"]=s),"function"==typeof a&&(this[e+"end"]=a)}return this},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object)return this.options.dropzone=!0,this.setOnEvents("drop",e),(this.selector?ot:nt).push(this),St||this.selector||(this.rect=this.getRect()),this;if("boolean"==typeof e){if(e)(this.selector?ot:nt).push(this),St||this.selector||(this.rect=this.getRect());else{var t=this.selector?ot:nt,n=t.indexOf(this);-1!==n&&t.splice(n,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e){var t,n,r=i(e);return St&&(this.rect=this.getRect()),t=r.x>this.rect.left&&r.x<this.rect.right,n=r.y>this.rect.top&&r.y<this.rect.bottom,t&&n},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},resizeable:function(e){return e instanceof Object?(this.options.resizeable=!0,this.setOnEvents("resize",e),this):"boolean"==typeof e?(this.options.resizeable=e,this):this.options.resizeable},squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gestureable:function(e){return e instanceof Object?(this.options.gestureable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gestureable=e,this):null===e?(delete this.options.gestureable,this):this.options.gestureable},autoScroll:function(e){var t=dt.autoScroll;if(e instanceof Object){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.distance=this.validateSetting("autoScroll","distance",e.distance),n.interval=this.validateSetting("autoScroll","interval",e.interval),n.container=this.validateSetting("autoScroll","container",e.container),this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return"boolean"==typeof e?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=dt.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n=this.options.snap={mode:t.mode,range:t.range,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors}),n.mode=this.validateSetting("snap","mode",e.mode),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},getAction:function(e){var t,n,r,o=this.getRect(),s=i(e),a=this.options;return wt.resize&&a.resizeable&&(t=s.x>o.right-yt,n=s.y>o.bottom-yt),wt.gesture&&e.touches&&e.touches.length>=2&&!Et&&!Ot?r="gesture":(_t=(t?"x":"")+(n?"y":""),r=_t?"resize"+_t:wt.drag&&a.draggable?"drag":null),r},actionChecker:function(e){return"function"==typeof e?(this.getAction=e,this):null===e?(delete this.options.getAction,this):this.getAction},getRect:function(){!this.selector||this._element instanceof Element||(this._element=D.querySelector(this.selector));var e=s(),t=this._element instanceof P?this._element.getBoundingClientRect():this._element.getClientRects()[0];return{left:t.left+e.x,right:t.right+e.x,top:t.top+e.y,bottom:t.bottom+e.y,width:t.width||t.right-t.left,height:t.heigh||t.bottom-t.top}},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){return void 0===e?this.options.restrictions:(e instanceof Object?this.options.restrictions=e:null===e&&delete this.options.restrictions,this)},validateSetting:function(e,t,n){var r=dt[e],i=this.options[e];if(void 0!==r&&void 0!==r[t]){if("objectTypes"in r&&r.objectTypes.test(t))return n instanceof Object?n:t in i&&i[t]instanceof Object?i[t]:r[t];if("arrayTypes"in r&&r.arrayTypes.test(t))return n instanceof Array?n:t in i&&i[t]instanceof Array?i[t]:r[t];if("stringTypes"in r&&r.stringTypes.test(t))return"string"==typeof n?n:t in i&&"string"==typeof i[t]?i[t]:r[t];if("numberTypes"in r&&r.numberTypes.test(t))return"number"==typeof n?n:t in i&&"number"==typeof i[t]?i[t]:r[t];if("elementTypes"in r&&r.elementTypes.test(t))return n instanceof Element?n:t in i&&i[t]instanceof Element?i[t]:r[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===Tt.indexOf(e.type))return this;for(var t,n,r=0,i=0,o="on"+e.type;3>r;)try{switch(r){case Mt.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>i&&!xt;i++)t[i](e);break}break;case Mt.onevent:"function"==typeof this[o]&&this[o](e);break;case Mt.globalBind:if(e.type in Yt&&(t=Yt[e.type]))for(n=t.length;n>i&&!xt;i++)t[i](e)}i=0,r++}catch(s){k.error("Error thrown from "+e.type+" listener"),k.error(s),i++,r===Mt.onevent&&r++}return xt=!1,this},on:function(e,t,n){if("wheel"===e&&(e=Xt),-1!==Tt.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){at[e]||(at[e]={});var r=at[e];r[this.selector]||(r[this.selector]=[]),r[this.selector].push([t,n?!0:!1]),jt.add(Dt,e,n?T:X,n)}else jt.add(this,e,t,n);return this},off:function(e,t,n){var r,i=-1;if(n=n?!0:!1,"wheel"===e&&(e=Xt),-1!==Tt.indexOf(e))r=this._iEvents[e],r&&-1!==(i=r.indexOf(t))&&this._iEvents[e].splice(i,1);else if(this.selector){var o=at[e];if(o&&(r=o[this.selector])){for(i=0;i<r.length&&r[i][1]!==n;i++);i<r.length&&r.splice(i,1)}}else jt.remove(this._element,t,n);return this},set:function(e){return e&&"object"==typeof e||(e={}),this.options=new C(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizeable("resizeable"in e?e.resizeable:this.options.resizeable),this.gestureable("gestureable"in e?e.gestureable:this.options.gestureable),"autoScroll"in e&&this.autoScroll(e.autoScroll),this},unset:function(){return jt.remove(this,"all"),"string"==typeof this.selector?delete it[this.selector]:(jt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null),rt.splice(rt.indexOf(this.element()))),this.dropzone(!1),tt.splice(tt.indexOf(this),1),M}},M.isSet=function(e){return-1!==tt.indexOfElement(e)},M.on=function(e,t,n){return-1!==Tt.indexOf(e)?Yt[e]?-1===Yt[e].indexOf(t)&&Yt[e].push(t):Yt[e]=[t]:jt.add(Dt,e,t,n),M},M.off=function(e,t,n){if(-1===Tt.indexOf(e))jt.remove(Dt,e,t,n);else{var r;e in Yt&&-1!==(r=Yt[e].indexOf(t))&&Yt[e].splice(r,1)}return M},M.simulate=function(e,n,r){var i,o,s={};if("resize"===e&&(e="resizexy"),!(e in zt))return M;if(r)for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);else o=ct._element instanceof P?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===e?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=t,v(s,e),M},M.enableDragging=function(e){return null!==e&&void 0!==e?(wt.drag=e,M):wt.drag},M.enableResizing=function(e){return null!==e&&void 0!==e?(wt.resize=e,M):wt.resize},M.enableGesturing=function(e){return null!==e&&void 0!==e?(wt.gesture=e,M):wt.gesture},M.eventTypes=Tt,M.debug=function(){return{target:ct,dragging:Et,resizing:Ot,gesturing:bt,prepared:Rt,prevX:N,prevY:$,x0:U,y0:H,downTime:J,downEvent:Q,prevEvent:Z,Interactable:I,IOptions:C,interactables:tt,dropzones:nt,pointerIsDown:mt,defaultOptions:dt,actions:zt,dragMove:b,resizeMove:E,gestureMove:S,pointerUp:R,pointerDown:v,pointerMove:x,pointerHover:w,events:jt,globalEvents:Yt,delegatedEvents:at,log:function(){k.log("target         :  "+ct),k.log("prevX, prevY   :  "+N,$),k.log("x0, y0         :  "+U,H),k.log("supportsTouch  :  "+ft),k.log("pointerIsDown  :  "+mt),k.log("currentAction  :  "+M.currentAction())}}},M.getTouchAverage=a,M.getTouchBBox=l,M.getTouchDistance=c,M.getTouchAngle=u,M.margin=function(e){return"number"==typeof e?(yt=e,M):yt},M.styleCursor=function(e){return"boolean"==typeof e?(dt.styleCursor=e,M):dt.styleCursor},M.autoScroll=function(e){var t=dt.autoScroll;return e instanceof Object?(dt.autoScrollEnabled=!0,"number"==typeof e.margin&&(t.margin=e.margin),"number"==typeof e.distance&&(t.distance=e.distance),"number"==typeof e.interval&&(t.interval=e.interval),t.container=e.container instanceof Element?e.container:t.container,M):"boolean"==typeof e?(dt.autoScrollEnabled=e,M):dt.autoScrollEnabled?t:!1},M.snap=function(e){var t=dt.snap;return e instanceof Object?(dt.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"number"==typeof e.range&&(t.range=e.range),e.actions instanceof Array&&(t.actions=e.actions),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),M):"boolean"==typeof e?(dt.snapEnabled=e,M):{enabled:dt.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:pt.locked,x:pt.x,y:pt.y,realX:pt.realX,realY:pt.realY,dx:pt.dx,dy:pt.dy}},M.supportsTouch=function(){return ft},M.currentAction=function(){return Et&&"drag"||Ot&&"resize"||bt&&"gesture"||null},M.stop=function(e){if(Et||Ot||bt){gt.stop(),st=[],ct.options.styleCursor&&(D.documentElement.style.cursor=""),ct._gesture&&(ct._gesture.stop(),lt.stop()),Y();for(var t=0;t<ot.length;t++)ot._elements=[];e&&"function"==typeof e.preventDefault&&e.preventDefault()}return mt=pt.locked=Et=Ot=bt=!1,vt=!0,Rt=Q=Z=null,M},M.dynamicDrop=function(e){return"boolean"==typeof e?(Et&&St!==e&&!e&&d(nt),St=e,M):St},M.deltaSource=function(e){return"page"===e||"client"===e?(dt.deltaSource=e,this):dt.deltaSource},M.restrict=function(e){return void 0===e?dt.restrictions:(e instanceof Object?dt.restrictions=e:null===e&&(dt.restrictions={}),this)},B?(jt.add(Dt,"pointerdown",m),jt.add(Dt,"pointercancel",R),jt.add(Dt,"MSGestureChange",x),jt.add(Dt,"MSGestureEnd",R),jt.add(Dt,"MSInertiaStart",R),jt.add(Dt,"pointerover",_),jt.add(Dt,"pointerout",z),lt=new G,lt.target=D.documentElement):(jt.add(Dt,"mousedown",m),jt.add(Dt,"mousemove",x),jt.add(Dt,"mouseup",R),jt.add(Dt,"mouseover",_),jt.add(Dt,"mouseout",z),jt.add(Dt,"touchstart",m),jt.add(Dt,"touchmove",x),jt.add(Dt,"touchend",R),jt.add(Dt,"touchcancel",R)),jt.add(At,"blur",R);try{e.frameElement&&(Pt._element=e.frameElement.ownerDocument,jt.add(Pt,"mouseup",R),jt.add(Pt,"touchend",R),jt.add(Pt,"touchcancel",R),jt.add(Pt,"pointerup",R),jt.add(kt,"blur",R))}catch(Lt){M.windowParentError=Lt}jt.add(Dt,"selectstart",function(e){(Et||Ot||bt)&&e.preventDefault()}),It in Element.prototype&&"function"==typeof Element.prototype[It]||(Element.prototype[It]=A=function(e,t){t=t||this.parentNode.querySelectorAll(e),count=t.length;for(var n=0;count>n;n++)if(t[n]===this)return!0;return!1}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports.interact=M):e.interact=M}(this);
